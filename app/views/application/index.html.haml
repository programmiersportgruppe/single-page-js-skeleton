%h1 Index page
%div{:id => 'site'}
  %div{:id => 'main'}
    %nav{:id => 'nav'}
      %ul
        %li
          %a{:href => '#/notes'} Notes
        %li
          %a{:href => '#/todos'} Todos
    .nav-site
      .component{:id => 'todos', 'data-bind' => 'visible: todos.visible'}
        %ol
          %li get the milk
          %li pick up the kids
      .component{:id => 'notes', 'data-bind' => 'visible: notes.visible'}
        these
        are
        notes

  %div{:id => 'sidebar'}
    %h3 Sidebar
    sidebar content

:javascript
  curl(
    {
        baseUrl: "/assets",
        paths: {
          "jquery": "jquery-1.7.2",
          "knockout": "knockout-2.1.0.debug"
        }
    },
    
    ["knockout", "application", "jquery", "sammy"], function (ko, Application, $, Sammy) {

      application = Application();
      ko.applyBindings(application);

      var router = Sammy('#site', function() {
        this.get('#/', function() {
          console.log('routing...');
          this.redirect("#/todos");
        });

        this.get('#/todos', function(){
          console.log('routing to todos');
          application.showTodos();
        });

        this.get('#/notes', function(){
          console.log('routing to notes');
          application.showNotes();
        });
      });

      router.run('#/');
    }
  );
